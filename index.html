<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediTech - Medicine Tracker</title>
    
    <!-- Link to CSS file -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Chart.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  </head>
  <body>
    <div class="container">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="nav-brand">
                <h2>ğŸ§ª MediTech</h2>
            </div>
            <div class="nav-links">
                <a href="home.html" class="nav-link">ğŸ  Home</a>
                <a href="#" class="nav-link" onclick="toggleReminders()">ğŸ”” Reminders</a>
                <a href="#" class="nav-link" onclick="toggleChatbot()">ğŸ’¬ AI Assistant</a>
                <a href="#" class="nav-link" onclick="showProfile()">ğŸ‘¤ Profile</a>
                <a href="login.html" class="nav-link logout-btn">ğŸšª Logout</a>
            </div>
            <div class="item-action">
              <button class="action-btn mark-taken" data-id="1">âœ… Take</button>
              <button class="action-btn mark-missed" data-id="1">Skip</button>
            </div>
          </div>

          <div class="schedule-item taken">
            <div class="item-info">
              <span class="pill-name">Lisinopril</span>
              <span class="pill-dosage">10mg</span>
            </div>
            <div class="item-time">
              <span>âœ… 09:30 AM</span>
            </div>
            <div class="item-action">
              <span class="status-message">Taken</span>
            </div>
          </div>

          <div class="schedule-item missed">
            <div class="item-info">
              <span class="pill-name">Vitamin D</span>
              <span class="pill-dosage">2000 IU</span>
            </div>
            <div class="item-time">
              <span>âŒ 12:00 PM</span>
            </div>
            <div class="item-action">
              <span class="status-message">Missed</span>
            </div>
          </div>
        </div>

        <h2 style="margin-top: 40px">All Medicines</h2>
        <div id="all-medicines" class="medicine-list"></div>
      </section>

      <!-- Tab 3: History -->
      <section id="history" class="tab-content">
        <h2>Medicine Log</h2>
        <div class="filter-buttons">
          <button onclick="filterHistory('all')" class="filter-btn active">
            All
          </button>
          <button onclick="filterHistory('taken')" class="filter-btn">
            Taken
          </button>
          <button onclick="filterHistory('missed')" class="filter-btn">
            Missed
          </button>
        </div>
        <div id="history-log" class="history-list">
          <!-- History will be shown here -->
        </div>
      </section>

      <!-- Tab 4: Enhanced Analytics -->
      <section id="analytics" class="tab-content">
        <h2>ğŸ“ˆ Your Wellness Analytics</h2>

        <!-- Stats Cards -->
        <div class="stats-cards">
          <div class="stat-card stat-card-1">
            <div class="stat-icon">ğŸ¯</div>
            <h3>Adherence Rate</h3>
            <p class="stat-number" id="adherence-rate">0%</p>
            <p class="stat-description">Overall compliance</p>
          </div>
          <div class="stat-card stat-card-2">
            <div class="stat-icon">âœ…</div>
            <h3>Doses Taken</h3>
            <p class="stat-number" id="doses-taken">0</p>
            <p class="stat-description">Successfully completed</p>
          </div>
          <div class="stat-card stat-card-3">
            <div class="stat-icon">âŒ</div>
            <h3>Doses Missed</h3>
            <p class="stat-number" id="doses-missed">0</p>
            <p class="stat-description">Needs attention</p>
          </div>
          <div class="stat-card stat-card-4">
            <div class="stat-icon">ğŸ’Š</div>
            <h3>Active Medicines</h3>
            <p class="stat-number" id="active-medicines">0</p>
            <p class="stat-description">Currently tracking</p>
          </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
          <!-- Pie Chart - Adherence Overview -->
          <div class="chart-box">
            <h3>ğŸ“Š Adherence Overview</h3>
            <canvas id="pieChart"></canvas>
          </div>

          <!-- Bar Chart - Weekly Trend -->
          <div class="chart-box">
            <h3>ğŸ“… Weekly Adherence Trend</h3>
            <canvas id="barChart"></canvas>
          </div>

          <!-- Line Chart - Daily Progress -->
          <div class="chart-box chart-box-large">
            <h3>ğŸ“ˆ Daily Progress Over Time</h3>
            <canvas id="lineChart"></canvas>
          </div>

          <!-- Doughnut Chart - Medicine Distribution -->
          <div class="chart-box">
            <h3>ğŸ’Š Medicine Distribution</h3>
            <canvas id="doughnutChart"></canvas>
          </div>
        </div>

        <!-- Insights Section -->
        <div class="insights-section">
          <h3>ğŸ’¡ Health Insights</h3>
          <div id="insights-list" class="insights-list">
            <!-- Insights will be generated here -->
          </div>
        </div>
      </section>
    </div>

    <!-- Chatbot Floating Button -->
    <div class="chatbot-btn" onclick="toggleChatbot()">
        <span>ğŸ’¬</span>
    </div>

    <!-- Chatbot Window - UPDATED -->
    <div class="chatbot-window" id="chatbot-window">
        <div class="chatbot-header">
            <h3>ğŸ¤– MediBot Assistant</h3>
            <button class="close-chat" onclick="event.stopPropagation(); toggleChatbot();">âœ•</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <div class="message bot">
                <div class="message-content">
                    Hi! I'm MediBot ğŸ‘‹ How can I help you with your medicines today?
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" class="chat-input" id="chat-input" placeholder="Ask me anything..." onkeypress="handleChatKeypress(event)">
            <button class="send-btn" onclick="sendMessage()">â¤</button>
        </div>
    </div>

    <!-- Reminders Popup -->
    <div class="popup-overlay" id="reminders-popup">
        <div class="popup-content">
            <div class="popup-header">
                <h3>ğŸ”” Active Reminders</h3>
                <button class="close-popup" onclick="toggleReminders()">âœ•</button>
            </div>
            <div class="popup-body" id="reminders-list">
                <!-- Reminders will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Profile Popup -->
    <div class="popup-overlay" id="profile-popup">
        <div class="popup-content">
            <div class="popup-header">
                <h3>ğŸ‘¤ User Profile</h3>
                <button class="close-popup" onclick="showProfile()">âœ•</button>
            </div>
            <div class="popup-body">
                <div class="profile-info">
                    <div class="profile-avatar">ğŸ‘¤</div>
                    <h2 id="user-name-display">User</h2>
                    <p class="user-email">user@meditech.com</p>
                </div>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <span class="stat-label">Member Since</span>
                        <span class="stat-value">Jan 2025</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-label">Total Medicines</span>
                        <span class="stat-value" id="profile-medicine-count">0</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-label">Streak Days</span>
                        <span class="stat-value">15 ğŸ”¥</span>
                    </div>
                </div>
                <button class="btn-primary" onclick="editProfile()">Edit Profile</button>
            </div>
        </div>
    </div>

    <!-- Link to JavaScript file -->
    <script src="script.js"></script>
  </body>
</html>
